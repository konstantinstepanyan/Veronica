export class Popup{constructor(i){const{targetSelector:e,overlaySelector:t,windowSelector:s,closeBtnSelector:p,displayPopup:o,popupHeight:a,popupWidth:h,disappearingTime:n,disappearingType:l,slidingTime:r,slidingType:c,slidingDir:d,autocloseTime:y,closeOnMiss:g,closeOnKeys:u}=i;this.targetSelector=e,this.overlaySelector=t,this.windowSelector=s,this.closeBtnSelector=p,this.displayPopup=o,this.popupHeight=a,this.popupWidth=h,this.disappearingTime=n,this.disappearingType=l||"ease",this.slidingTime=r,this.slidingType=c||"ease",this.slidingDir=d||"left",this.autocloseTime=y,this.closeOnMiss=g,this.closeOnKeys=u,this.popupTrigger=document.querySelector(`${this.targetSelector}`),this.popupOverlay=document.querySelector(`${this.overlaySelector}`),this.popupWindow=document.querySelector(`${this.windowSelector}`),this.closeBtn=document.querySelector(`${this.closeBtnSelector}`),this.init()}init(){if(this.disappearance(),this.popupTrigger.addEventListener("click",this.appearance.bind(this)),this.popupTrigger.addEventListener("touchstart",this.appearance.bind(this)),this.closeBtn.addEventListener("click",this.disappearance.bind(this)),this.closeBtn.addEventListener("touchstart",this.disappearance.bind(this)),this.closeOnMiss&&(this.popupOverlay.addEventListener("click",i=>{i.target.classList.contains(`${this.overlaySelector.slice(1)}`)&&this.disappearance()}),this.popupOverlay.addEventListener("touchstart",i=>{i.target.classList.contains(`${this.overlaySelector.slice(1)}`)&&this.disappearance()})),this.closeOnKeys){const i=this.closeOnKeys.replace(/\s+/g,"").split(",");document.addEventListener("keydown",e=>{i.forEach(i=>{parseInt(i,10)===e.keyCode&&this.disappearance()})})}}appearance(){if(this.slidingType)switch(this.popupWindow.style.transition=`all ${this.slidingTime/1e3}s ${this.slidingType}, height 0s ${this.slidingType} 0s`,this.slidingTime&&this.slidingType&&this.slidingDir){case"left":this.popupWindow.style.left="0px";break;case"right":this.popupWindow.style.right="0px";break;case"top":this.popupWindow.style.top="0px";break;case"bottom":this.popupWindow.style.bottom="0px"}this.popupOverlay.style.height=this.popupHeight,this.popupOverlay.style.width=this.popupWidth,this.popupOverlay.style.opacity=1,this.popupOverlay.style.transition=`opacity ${this.disappearingTime/1e3}s ${this.disappearingType}, height 0s ${this.disappearingType} 0s`,this.autocloseTime&&setTimeout(()=>{this.disappearance(),console.log(1)},this.autocloseTime)}disappearance(){if(this.slidingTime&&this.slidingType&&this.slidingDir)switch(this.popupWindow.style.transition=`all ${this.slidingTime/1e3}s ${this.slidingType}, height 0s ${this.slidingType} ${this.slidingTime/1e3}s`,this.slidingDir){case"left":this.popupWindow.style.left="-100%";break;case"right":this.popupWindow.style.right="-100%";break;case"top":this.popupWindow.style.top="-100%";break;case"bottom":this.popupWindow.style.bottom="-100%"}this.popupOverlay.style.height=0,this.popupOverlay.style.opacity=0,this.popupOverlay.style.transition=`opacity ${this.disappearingTime/1e3}s ${this.disappearingType}, height 0s ${this.disappearingType} ${this.disappearingTime/1e3}s`}}